# –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: –ö–∞–∫ —Ç–µ—Å—Ç—ã –∑–∞—â–∏—â–∞—é—Ç –æ—Ç –æ—à–∏–±–æ–∫

## –°—Ü–µ–Ω–∞—Ä–∏–π: –í—ã —Å–ª—É—á–∞–π–Ω–æ —Å–ª–æ–º–∞–ª–∏ –∫–æ–¥

–î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ —Ç–µ—Å—Ç—ã –∑–∞—â–∏—â–∞—é—Ç –æ—Ç –æ—à–∏–±–æ–∫ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ.

### –®–∞–≥ 1: –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

```javascript
// utils/divideIntoTeams.js
function divideIntoTeams(players, numTeams) {
  if (!players || players.length === 0 || players.length < numTeams) {
    return Array.from({ length: numTeams }, () => []);
  }
  
  // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É
  const sortedPlayers = [...players].sort((a, b) => 
    parseFloat(b.rating || 0) - parseFloat(a.rating || 0)
  );
  const teams = Array.from({ length: numTeams }, () => []);

  // –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ "–∑–º–µ–π–∫–æ–π"
  for (let i = 0; i < sortedPlayers.length; i++) {
    const teamIndex = i % numTeams;
    const round = Math.floor(i / numTeams);
    const finalTeamIndex = round % 2 === 0 ? teamIndex : numTeams - 1 - teamIndex;
    teams[finalTeamIndex].push(sortedPlayers[i]);
  }

  return teams;
}
```

**–ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã:**
```bash
$ npm test -- divideIntoTeams
```
‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç!

### –®–∞–≥ 2: –í—ã –º–µ–Ω—è–µ—Ç–µ –∫–æ–¥ (–Ω–µ—á–∞—è–Ω–Ω–æ –ª–æ–º–∞–µ—Ç–µ) ‚ùå

–î–æ–ø—É—Å—Ç–∏–º –≤—ã —Ä–µ—à–∏–ª–∏ "—É–ª—É—á—à–∏—Ç—å" –∫–æ–¥ –∏ —Å–ª—É—á–∞–π–Ω–æ –¥–æ–ø—É—Å—Ç–∏–ª–∏ –æ—à–∏–±–∫—É:

```javascript
// utils/divideIntoTeams.js (–°–õ–û–ú–ê–ù–ù–ê–Ø –í–ï–†–°–ò–Ø)
function divideIntoTeams(players, numTeams) {
  // ... –∫–æ–¥ ...
  
  // –û–®–ò–ë–ö–ê: –∑–∞–±—ã–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å!
  for (let i = 0; i < sortedPlayers.length; i++) {
    const teamIndex = i % numTeams;
    // –û–®–ò–ë–ö–ê: –∑–∞–±—ã–ª–∏ –∞–ª–≥–æ—Ä–∏—Ç–º –∑–º–µ–π–∫–∏!
    teams[teamIndex].push(sortedPlayers[i]);  // ‚ùå –í—Å–µ –∏–≥—Ä–æ–∫–∏ –∏–¥—É—Ç —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ
  }

  return teams;
}
```

### –®–∞–≥ 3: –¢–µ—Å—Ç—ã –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—É! üîç

–ó–∞–ø—É—Å–∫–∞–µ—Ç–µ —Ç–µ—Å—Ç—ã —Å–Ω–æ–≤–∞:

```bash
$ npm test -- divideIntoTeams
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
FAIL __tests__/utils/divideIntoTeams.test.js
  divideIntoTeams
    –û—Å–Ω–æ–≤–Ω—ã–µ —Å–ª—É—á–∞–∏
      ‚úì –¥–æ–ª–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –∏–≥—Ä–æ–∫–æ–≤ –Ω–∞ 2 –∫–æ–º–∞–Ω–¥—ã (10 ms)
      ‚úó –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–º–µ–π–∫—É –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (2 ms)

      expect(received).toBe(expected)

      Expected: 80
      Received: 100

      at Object.toThrow (__tests__/utils/divideIntoTeams.test.js:29:9)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 13 passed, 14 total
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:**
- 13 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏ ‚úÖ
- 1 —Ç–µ—Å—Ç –ø—Ä–æ–≤–∞–ª–∏–ª—Å—è ‚ùå - "–¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–º–µ–π–∫—É –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è"
- –¢–µ—Å—Ç –ø–æ–∫–∞–∑–∞–ª –¢–û–ß–ù–û –≥–¥–µ –æ—à–∏–±–∫–∞: –æ–∂–∏–¥–∞–ª–∏ rating 80, –ø–æ–ª—É—á–∏–ª–∏ 100

### –®–∞–≥ 4: –¢–µ—Å—Ç –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å üìù

–°–º–æ—Ç—Ä–∏–º –Ω–∞ –ø—Ä–æ–≤–∞–ª–∏–≤—à–∏–π—Å—è —Ç–µ—Å—Ç:

```javascript
test('–¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–º–µ–π–∫—É –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è', () => {
  const players = [
    { id: 1, name: 'Player1', rating: 100 },
    { id: 2, name: 'Player2', rating: 90 },
    { id: 3, name: 'Player3', rating: 80 },
    { id: 4, name: 'Player4', rating: 70 },
  ];

  const teams = divideIntoTeams(players, 2);

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–º–µ–π–∫—É: –ø–µ—Ä–≤—ã–π —Ä–∞—É–Ω–¥ (100, 90) –∏–¥–µ—Ç 0,1, –≤—Ç–æ—Ä–æ–π (80, 70) –∏–¥–µ—Ç 1,0
  expect(teams[0][0].rating).toBe(100);  // ‚úÖ OK
  expect(teams[1][0].rating).toBe(90);   // ‚úÖ OK
  expect(teams[1][1].rating).toBe(80);   // ‚ùå –û–®–ò–ë–ö–ê –∑–¥–µ—Å—å!
  expect(teams[0][1].rating).toBe(70);
});
```

**–ü–æ–Ω–∏–º–∞–µ—Ç–µ:** 
- –ê–ª–≥–æ—Ä–∏—Ç–º –∑–º–µ–π–∫–∏ –Ω—É–∂–µ–Ω –¥–ª—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- –ë–µ–∑ –∑–º–µ–π–∫–∏ —Å–∏–ª—å–Ω—ã–µ –∏–≥—Ä–æ–∫–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É
- –ù—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –∫–æ–¥ –∑–º–µ–π–∫–∏

### –®–∞–≥ 5: –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç–µ –æ—à–∏–±–∫—É ‚úÖ

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥:

```javascript
// utils/divideIntoTeams.js (–ò–°–ü–†–ê–í–õ–ï–ù–û)
for (let i = 0; i < sortedPlayers.length; i++) {
  const teamIndex = i % numTeams;
  const round = Math.floor(i / numTeams);
  const finalTeamIndex = round % 2 === 0 ? teamIndex : numTeams - 1 - teamIndex;  // ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –∑–º–µ–π–∫—É
  teams[finalTeamIndex].push(sortedPlayers[i]);
}
```

### –®–∞–≥ 6: –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç! üéâ

```bash
$ npm test -- divideIntoTeams
```

```
PASS __tests__/utils/divideIntoTeams.test.js
  divideIntoTeams
    ‚úì –≤—Å–µ 14 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏

Test Suites: 1 passed, 1 total
Tests:       14 passed, 14 total
```

‚úÖ **–£–≤–µ—Ä–µ–Ω—ã:** –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

---

## –†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ú–µ–Ω—è–µ—Ç–µ –ª–∏–º–∏—Ç –∏–≥—Ä–æ–∫–æ–≤

**–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥:**
```javascript
// store/index.js
let MAX_PLAYERS = 20;
```

**–í—ã –º–µ–Ω—è–µ—Ç–µ –Ω–∞ 32:**
```javascript
let MAX_PLAYERS = 32;
```

**–í–æ–ø—Ä–æ—Å:** –ù–µ —Å–ª–æ–º–∞–ª–∏ –ª–∏ –≤—ã —á—Ç–æ-–Ω–∏–±—É–¥—å?

**–û—Ç–≤–µ—Ç:** –ó–∞–ø—É—Å–∫–∞–µ—Ç–µ —Ç–µ—Å—Ç—ã!

```bash
$ npm test
```

```
PASS __tests__/store/index.test.js
  GlobalState
    ‚úì –¥–æ–ª–∂–µ–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å –º–∞–∫—Å–∏–º—É–º –∏–≥—Ä–æ–∫–æ–≤
```

‚úÖ –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç! –í–∞—à–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥.

---

## –†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏

–í—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ –∫–æ–º–∞–Ω–¥—ã.

### –°–æ–∑–¥–∞–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é

```javascript
// utils/calculateTeamRating.js
function calculateTeamRating(players) {
  if (!players || players.length === 0) return 0;
  
  const totalRating = players.reduce((sum, player) => 
    sum + (player.rating || 0), 0
  );
  
  return Math.round(totalRating / players.length);
}

module.exports = { calculateTeamRating };
```

### –ü–∏—à–µ—Ç–µ —Ç–µ—Å—Ç—ã –°–†–ê–ó–£

```javascript
// __tests__/utils/calculateTeamRating.test.js
const { calculateTeamRating } = require('../../utils/calculateTeamRating');

describe('calculateTeamRating', () => {
  test('–¥–æ–ª–∂–µ–Ω –ø–æ—Å—á–∏—Ç–∞—Ç—å —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã', () => {
    const players = [
      { id: 1, rating: 100 },
      { id: 2, rating: 80 },
      { id: 3, rating: 60 },
    ];
    
    expect(calculateTeamRating(players)).toBe(80);  // (100+80+60)/3 = 80
  });

  test('–¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø—É—Å—Ç—É—é –∫–æ–º–∞–Ω–¥—É', () => {
    expect(calculateTeamRating([])).toBe(0);
  });

  test('–¥–æ–ª–∂–µ–Ω –æ–∫—Ä—É–≥–ª–∏—Ç—å –¥–æ —Ü–µ–ª–æ–≥–æ', () => {
    const players = [
      { id: 1, rating: 100 },
      { id: 2, rating: 85 },
    ];
    
    expect(calculateTeamRating(players)).toBe(93);  // (100+85)/2 = 92.5 ‚âà 93
  });
});
```

### –ü—Ä–æ–≤–µ—Ä—è–µ—Ç–µ —Ä–∞–±–æ—Ç—É

```bash
$ npm test -- calculateTeamRating
```

‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç ‚Üí —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

---

## –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?

### –ë–µ–∑ —Ç–µ—Å—Ç–æ–≤:
1. –°–¥–µ–ª–∞–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
2. **–ù–ï –ó–ù–ê–ï–¢–ï** —Å–ª–æ–º–∞–ª–∏ –ª–∏ —á—Ç–æ-—Ç–æ
3. –ó–∞–ø—É—Å–∫–∞–µ—Ç–µ –±–æ—Ç–∞
4. **–û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç–µ –ø—Ä–æ–±–ª–µ–º—É** —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∂–∞–ª—É—é—Ç—Å—è üò±

### –° —Ç–µ—Å—Ç–∞–º–∏:
1. –°–¥–µ–ª–∞–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
2. –ó–∞–ø—É—Å–∫–∞–µ—Ç–µ `npm test`
3. **–°–†–ê–ó–£ –≤–∏–¥–∏—Ç–µ** —á—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å ‚úÖ
4. –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç–µ –î–û –≤—ã–∫–ª–∞–¥–∫–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
5. **–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** üéâ

---

## –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã

```bash
# –í–∫–ª—é—á–∏—Ç—å watch mode –≤ —Ñ–æ–Ω–µ
npm run test:watch

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
npm test -- divideIntoTeams

# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–ª–æ—Å—å
npm test

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
npm run test:coverage
```

---

**–í—ã–≤–æ–¥:** –¢–µ—Å—Ç—ã - —ç—Ç–æ –≤–∞—à "–¥–µ—Ç–µ–∫—Ç–æ—Ä –æ—à–∏–±–æ–∫", –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç 24/7 –∏ –∑–∞—â–∏—â–∞–µ—Ç –≤–∞—à –∫–æ–¥! üõ°Ô∏è

